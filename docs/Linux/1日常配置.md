CentOS7

CentOS7关闭防火墙和selinux  
直接上命令  
在root用户下  
\# 关闭取消自启  
systemctl stop firewalld  
systemctl disable firewalld  
systemctl status firewalld  
sed -i 's/SELINUX=.\*/SELINUX=disabled/g' /etc/selinux/config  
setenforce 0

\# 查看状态  
getenforce  
  
\# 安装setup下的服务管理 防火墙设置  
yum install setuptool -y  
yum install ntsysv -y  
yum install system-config-securitylevel-tui -y  
\# 安装多个软件  
yum install wget zip unzip vim lrzsz screen ntp nmap net-tools lsof python-pip  
  
扩展源  
yum install epel-release -y  
  
ssh连接慢 修改这几项  
vim /etc/ssh/sshd_config  
PermitEmptyPasswords no  
UseDNS no  
GSSAPIAuthentication no  
/etc/init.d/sshd reload  
  
查看自启  
systemctl list-unit-files \| grep enabled  
ll /etc/systemd/system/multi-user.target.wants/  
  
使某服务自动启动  
chkconfig --level 3 httpd on  
systemctl enable httpd.service  
  
使某服务不自动启动  
chkconfig --level 3 httpd off  
systemctl disable httpd.service  
  
检查服务状态  
service httpd status  
systemctl status httpd.service （服务详细信息）  
systemctl is-active httpd.service （仅显示是否 Active)  
显示所有已启动的服务  
chkconfig --list  
systemctl list-units --type=service  
启动某服务  
service httpd start  
systemctl start httpd.service  
停止某服务  
service httpd stop  
systemctl stop httpd.service  
重启某服务  
service httpd restart  
systemctl restart httpd.service  
  
禁止默认root账号登陆，并创建普通账号用于登陆  
还是编辑上面的文件  
vi /etc/ssh/sshd_config  
找到＃PermitRootLogin no 这行,把前面的\#去掉，修改no为yes，保存即可。  
然后不要着急重启服务，先要创建账号。  
useradd admin  
useradd是创建命令，admin是你要创建账号的名称，然后要为新账号设置密码。  
passwd admin  
输入上面的命令之后就会让你输入密码和确定密码，然后就可以尝试用新账号登陆远程登陆了。  
systemctl restart sshd  
重启服务之后，你就会发现root账号是无法登陆了，用普通账号登陆之后输入su,然后输入root密码就可以使用root的权限了。  
  
Linux下有两个清屏命令：  
clear  
这个命令将会刷新屏幕，本质上只是让终端显示页向后翻了一页，如果向上滚动屏幕还可以看到之前的操作信息。一般都会使用这个命令。  
reset  
这个命令将完全刷新终端屏幕，之前的终端输入操作信息将都会被清空，这样虽然比较清爽，但整个命令过程速度有点慢，使用较少。

centos 6  
查看防火墙开启哪些端口：  
  
/etc/init.d/iptables stop  
chkconfig iptables off  
/etc/init.d/iptables status  
setenforce 0  
sed -i 's/SELINUX=.\*/SELINUX=disabled/g' /etc/selinux/config  
getenforce  
  
开放3306端口  
vi /etc/sysconfig/iptables  
-A INPUT -m state -state NEW -m tcp -p tcp -dport 22 -j ACCEPT  
-A INPUT -m state -state NEW -m tcp -p tcp -dport 80 -j ACCEPT  
-A INPUT -m state -state NEW -m tcp -p tcp -dport 3306 -j ACCEPT  
/etc/init.d/iptables restart重启  
  
查看SELinux状态：  
1、/usr/sbin/sestatus -v \#如果SELinux status参数为enabled即为开启状态  
SELinux status: enabled  
2、getenforce \#也可以用这个命令检查  
关闭SELinux：  
1、临时关闭（不用重启机器）：  
setenforce 0 \#设置SELinux 成为permissive模式  
\#\#setenforce 1 \#设置SELinux 成为enforcing模式  
2、修改配置文件需要重启机器：  
修改/etc/selinux/config 文件  
将SELINUX=enforcing改为SELINUX=disabled  
重启机器即可

安装 ntpdate 并同步时间  
  
在命令行中做如下操作，来安装ntpdate  
继续在命令行中操作，进行同步时间  
yum -y install ntp  
ntpdate ntp1.aliyun.com  
或者  
ntpdate ntp2.aliyun.com  
\~  
ntpdate ntp7.aliyun.com  
00:0C:29:43:D1:81  
  
防火墙  
/etc/init.d/iptables stop 暂时关闭  
chkconfig iptables off 关闭自启动  
/etc/init.d/iptables restart 重启iptables  
  
\# chkconfig --list \# 列出所有系统服务  
\# chkconfig -list \| grep on \# 列出所有启动的系统服务程序  
查找一个服务的一个方式 如80端口的web服务  
netstat -ntlp \| grep 80 \# 查看是什么服务  
  
找到配置文件 找到网站根目录  
which mysql \# 或者这个查看安装路径

优化小结  
1）不用root管理，以普通用户的名义通过sudo授权管理  
2）更改默认的远程连接SSH服务端口，禁用root用户远程连接，甚至要更改只监听内网IP  
3）定时更新服务器时间，与互联网时间同步  
4）配置yum更新源，从国内更新资源下载安装包  
5）关闭seLinux及iptables  
6）调整文件描述符的数量，进程及文件的打开都会消耗文件描述符  
7）定时自动清理邮件目录垃圾文件，防止inodes节点被占满  
8）精简并保留必要的开机自启动服务  
9）linux内核参数优化/etc/sysctl.conf，执行sysctl -p生效  
10）更改字符集，使其支持中文，  
11）锁定关键文件如（/etc/passwd /etc/shadow /etc/group ...）  
12)清空/etc/issue、/etc/issue.net,去除系统及内核版本登录前的显示  
13）清除多余的系统虚拟账户  
14）为grub菜单加密码
